<!-- Внутри <body> -->
    <div class="buttons-container" id="btn-container">
        <!-- Исправлено: теперь ведет в lobby.html, но через функцию -->
        <div class="ghost-btn" onclick="Menu.playTransition()">Быстрая игра</div>
        <div class="ghost-btn" onclick="Menu.playTransition()">Ранговый матч</div>
        <div class="ghost-btn disabled">2 на 2</div>
    </div>

<!-- ... остальной HTML (видео и т.д.) ... -->

<script>
const Menu = {
    playTransition() {
        const btns = document.getElementById('btn-container');
        const layer = document.getElementById('transition-layer');
        const video = document.getElementById('transition-video');

        // Генерируем имя
        const username = "Player_" + Math.floor(Math.random() * 9999);
        // ИСПРАВЛЕНО: Переход на lobby.html
        const targetUrl = `lobby.html?username=${username}`;

        const go = () => window.location.href = targetUrl;
        const fallbackTimer = setTimeout(go, 4000);

        btns.style.opacity = '0';
        
        setTimeout(() => {
            btns.style.display = 'none';
            layer.style.display = 'block';
            
            video.currentTime = 0;
            const playPromise = video.play();

            if (playPromise !== undefined) {
                playPromise.then(() => {}).catch(error => {
                    console.log("Автозапуск не сработал:", error);
                    clearTimeout(fallbackTimer);
                    go();
                });
            }

            video.onended = () => {
                clearTimeout(fallbackTimer);
                go();
            };
        }, 300);
    }
};
</script>
